"use strict";angular.module("editProfileDirective",["gettext","jobFunctionSelect","languageSelect","countrySelect","profileService"]).directive("editProfile",["profileService","gettextCatalog",function(a,b){return{restrict:"E",templateUrl:"template/edit-profile.html",scope:{successCallback:"&",errorCallback:"&",cancelCallback:"&"},link:function(c){c.init=function(){a.load().success(function(a){c.profile=a}).error(function(){c.submitMsg=b.getString("Error loading profile")})},c.submit=function(d){d.$invalid||a.save(c.profile).success(function(){c.submitMsg=b.getString("Profile successfully updated"),c.successCallback&&c.successCallback()}).error(function(){c.submitMsg=b.getString("Error saving profile"),c.errorCallback&&c.errorCallback()})},c.cancel=function(){c.cancelCallback&&c.cancelCallback()},c.hasProvider=function(b){return a.hasProvider(b,this.profile)},c.init()}}}]),angular.module("profileService",[]).factory("profileService",["$http","baseUrl","token",function(a,b,c){var d={baseUrl:b,token:c};return d.init=function(a,b){this.baseUrl=a,this.token=b},d.load=function(){return a.get(this.baseUrl,{headers:{Authorization:this.token,Accept:"application/json"}})},d.save=function(b){return a.put(this.baseUrl,b,{headers:{Authorization:this.token}})},d.hasProvider=function(a,b){if(void 0===b)return!1;var c=b.socialIdentities;if(!angular.isArray(c)||c.length<1)return!1;var d=!1;return c.forEach(function(b){b.providerName===a&&(d=!0)}),d},d}]),angular.module("htmlTemplates",["template/edit-profile.html"]),angular.module("template/edit-profile.html",[]).run(["$templateCache",function(a){a.put("template/edit-profile.html",'<div class="edit-profile"><section class="form-container row"><form name="editProfileForm" ng-submit="submit(editProfileForm)"><div class="col-xs-6 col-sm-6 column"><fieldset><h2 translate>Your account</h2><div class="form-group"><label for="givenName" translate>Given name</label><span class="mandatory">&nbsp;*</span>: <input class="form-control input-xlarge" required type="text" name="givenName" id="givenName" ng-model="profile.lastName" placeholder="{{\'Please enter your given name\'|translate}}"><div class="error ng-hide" ng-show="editProfileForm.givenName.$dirty && editProfileForm.givenName.$invalid" translate>This field is required</div></div><div class="form-group"><label for="sn" translate>Surname</label><span class="mandatory">&nbsp;*</span>: <input class="form-control input-xlarge" required type="text" name="sn" id="sn" ng-model="profile.firstName" placeholder="{{\'Please enter your surname\'|translate}}"><div class="error ng-hide" ng-show="editProfileForm.sn.$dirty && editProfileForm.sn.$invalid" translate>This field is required</div></div><div class="form-group"><label for="email" translate>Email</label><span class="mandatory">&nbsp;*</span>: <input class="form-control input-xlarge" required type="email" ng-model="profile.email" name="email" id="email" placeholder="{{\'Please enter a valid email address\'|translate}}" readonly></div><h2 translate>My Social Network</h2><div class="info-block"><div class="social-box"><span class="facebook" ng-class="{disabled: !hasProvider(\'facebook\')}"></span> <span class="twitter" ng-class="{disabled: !hasProvider(\'twitter\')}"></span> <span class="linkedin" ng-class="{disabled: !hasProvider(\'linkedin\')}"></span> <span class="google" ng-class="{disabled: !hasProvider(\'google\')}"></span></div></div><div class="row"><div class="form-group col-xs-6 col-sm-6"><label for="country" translate>Country</label><span class="mandatory">&nbsp;*</span>:<country-select class="form-control input-xlarge" required name="country" id="country" data-ng-model="profile.country"></country-select><div class="error ng-hide" ng-show="editProfileForm.country.$dirty && editProfileForm.country.$invalid" translate>This field is required</div></div><div class="form-group col-xs-6 col-sm-6"><label for="language" translate>Language</label><span class="mandatory">&nbsp;*</span>:<language-select class="form-control input-xlarge" required name="language" id="language" data-ng-model="profile.preferredLanguage"></language-select><div class="error ng-hide" ng-show="editProfileForm.language.$dirty && editProfileForm.language.$invalid" translate>This field is required</div></div></div></fieldset></div><div class="col-xs-6 col-sm-6 column separation-left"><fieldset><h2 translate>Your job</h2><div class="form-group"><label for="jobFunction" translate>Job function</label><span class="mandatory">&nbsp;*</span>:<job-function-select class="form-control input-xlarge" required name="jobFunction" id="jobFunction" data-ng-model="profile.jobFunction"></job-function-select><div class="error ng-hide" ng-show="editProfileForm.jobFunction.$dirty && editProfileForm.jobFunction.$invalid" translate>This field is required</div></div><h2 translate>Your company</h2><div class="form-group"><label for="company" translate>Company Name</label><span class="mandatory">&nbsp;*</span>: <input class="form-control input-xlarge" required type="text" name="company" id="company" ng-model="profile.companyName" placeholder="{{\'Please enter your company name\'|translate}}"><div class="error ng-hide" ng-show="editProfileForm.company.$dirty && editProfileForm.company.$invalid" translate>This field is required</div></div><div class="form-group"><label for="partnerId" translate>Partner ID</label><input class="form-control input-xlarge" type="text" name="partnerId" id="partnerId" ng-model="profile.partnerId" placeholder="{{\'Please enter your Partner Id\'|translate}}"></div><div class="info-block small"><span class="mandatory">*</span>&nbsp;<span translate>Fields are mandatory</span></div><div class="form-group"><input type="hidden" name="id" ng-model="profile.id"> <input type="button" ng-click="cancel()" id="editprofileCancelButton" name="editprofileCancelButton" value="{{\'Cancel\' | translate}}"> <input type="submit" ng-disabled="editProfileForm.$invalid" id="editprofilebutton" name="editprofilebutton" value="{{\'Submit\' | translate}}"></div><div class="error ng-hide" ng-show="submitMsg">{{submitMsg}}</div></fieldset></div></form></section></div>')}]);